{"ast":null,"code":"var _jsxFileName = \"D:\\\\2077\\\\ForMerging-master\\\\ForMerging\\\\src\\\\components\\\\accomodation\\\\SingleAccomodation\\\\index.js\";\nimport React, { Component } from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { firebase, firebaseDB } from '../../../firebase';\nimport SingleRoom from './SingleRoom';\nimport Tariff from '../Tariff';\nimport { withRouter } from 'react-router-dom';\n\nclass SingleAccomodation extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isLoading: true,\n      room: {},\n      roomId: ''\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.match.params.id) {\n      const roomId = this.props.match.params.id;\n      firebaseDB.ref(`rooms/${roomId}`).once('value').then(snapshot => {\n        const room = snapshot.val();\n        let promise = new Promise((resolve, reject) => {\n          firebase.storage().ref('rooms').child(room.image).getDownloadURL().then(url => {\n            room.url = url;\n            resolve();\n          }).catch(err => {\n            reject(err);\n          });\n        });\n        promise.then(() => {\n          this.setState({\n            roomId,\n            room,\n            isLoading: false\n          });\n        });\n      });\n    }\n  }\n\n  render() {\n    console.log(this.state);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container single-room-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 13\n      }\n    }, this.state.isLoading ? /*#__PURE__*/React.createElement(CircularProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 25\n      }\n    }) : /*#__PURE__*/React.createElement(SingleRoom, {\n      room: this.state.room,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(Tariff, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default withRouter(SingleAccomodation);","map":{"version":3,"sources":["D:/2077/ForMerging-master/ForMerging/src/components/accomodation/SingleAccomodation/index.js"],"names":["React","Component","CircularProgress","firebase","firebaseDB","SingleRoom","Tariff","withRouter","SingleAccomodation","state","isLoading","room","roomId","componentDidMount","props","match","params","id","ref","once","then","snapshot","val","promise","Promise","resolve","reject","storage","child","image","getDownloadURL","url","catch","err","setState","render","console","log"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,mBAArC;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;;AAEA,MAAMC,kBAAN,SAAiCP,SAAjC,CAA2C;AAAA;AAAA;AAAA,SAEvCQ,KAFuC,GAEjC;AACFC,MAAAA,SAAS,EAAE,IADT;AAEFC,MAAAA,IAAI,EAAE,EAFJ;AAGFC,MAAAA,MAAM,EAAE;AAHN,KAFiC;AAAA;;AAQvCC,EAAAA,iBAAiB,GAAE;AACf,QAAG,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,EAA3B,EAA8B;AAC1B,YAAML,MAAM,GAAG,KAAKE,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,EAAvC;AACAb,MAAAA,UAAU,CAACc,GAAX,CAAgB,SAAQN,MAAO,EAA/B,EAAkCO,IAAlC,CAAuC,OAAvC,EAAgDC,IAAhD,CAAsDC,QAAD,IAAc;AAC/D,cAAMV,IAAI,GAAGU,QAAQ,CAACC,GAAT,EAAb;AACA,YAAIC,OAAO,GAAG,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAC3CvB,UAAAA,QAAQ,CAACwB,OAAT,GAAmBT,GAAnB,CAAuB,OAAvB,EACCU,KADD,CACOjB,IAAI,CAACkB,KADZ,EACmBC,cADnB,GAECV,IAFD,CAEOW,GAAG,IAAI;AACVpB,YAAAA,IAAI,CAACoB,GAAL,GAAWA,GAAX;AACAN,YAAAA,OAAO;AACV,WALD,EAKGO,KALH,CAKSC,GAAG,IAAI;AACZP,YAAAA,MAAM,CAACO,GAAD,CAAN;AACH,WAPD;AAQH,SATa,CAAd;AAUAV,QAAAA,OAAO,CAACH,IAAR,CAAa,MAAI;AACb,eAAKc,QAAL,CAAc;AACVtB,YAAAA,MADU;AAEVD,YAAAA,IAFU;AAGVD,YAAAA,SAAS,EAAE;AAHD,WAAd;AAKH,SAND;AAOH,OAnBD;AAoBH;AACJ;;AAEDyB,EAAAA,MAAM,GAAG;AACLC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAK5B,KAAjB;AACA,wBACI;AAAK,MAAA,SAAS,EAAC,iCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEQ,KAAKA,KAAL,CAAWC,SAAX,gBACI,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,gBAEE,oBAAC,UAAD;AAAY,MAAA,IAAI,EAAE,KAAKD,KAAL,CAAWE,IAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJV,eAMI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANJ,CADJ;AAUH;;AA9CsC;;AAiD3C,eAAeJ,UAAU,CAACC,kBAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { firebase, firebaseDB } from '../../../firebase'\r\nimport SingleRoom from './SingleRoom'; \r\nimport Tariff from '../Tariff';\r\nimport {withRouter} from 'react-router-dom'\r\n\r\nclass SingleAccomodation extends Component {\r\n\r\n    state={\r\n        isLoading: true,\r\n        room: {},\r\n        roomId: ''\r\n    }\r\n\r\n    componentDidMount(){\r\n        if(this.props.match.params.id){\r\n            const roomId = this.props.match.params.id;\r\n            firebaseDB.ref(`rooms/${roomId}`).once('value').then((snapshot) => {\r\n                const room = snapshot.val();\r\n                let promise = new Promise((resolve, reject) => {\r\n                    firebase.storage().ref('rooms')\r\n                    .child(room.image).getDownloadURL()\r\n                    .then( url => {\r\n                        room.url = url;\r\n                        resolve();\r\n                    }).catch(err => {\r\n                        reject(err)\r\n                    })\r\n                }) \r\n                promise.then(()=>{\r\n                    this.setState({\r\n                        roomId,\r\n                        room,\r\n                        isLoading: false\r\n                    })\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        console.log(this.state)\r\n        return (\r\n            <div className=\"container single-room-container\">\r\n                {\r\n                    this.state.isLoading ? \r\n                        <CircularProgress />\r\n                    : <SingleRoom room={this.state.room}/>\r\n                }\r\n                <Tariff />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(SingleAccomodation);"]},"metadata":{},"sourceType":"module"}