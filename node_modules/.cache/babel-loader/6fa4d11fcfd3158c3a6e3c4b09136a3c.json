{"ast":null,"code":"var _jsxFileName = \"D:\\\\2077\\\\ForMerging-master\\\\ForMerging\\\\src\\\\components\\\\admin\\\\rooms\\\\index.js\";\nimport React, { Component } from 'react';\nimport AdminLayout from '../../../HOC/AdminLayout';\nimport { Link } from 'react-router-dom';\nimport { firebase, firebaseRooms } from '../../../firebase';\nimport { firebaseLooper, reverseArray } from '../../ui/misc';\n\nclass AdminRooms extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isLoading: true,\n      rooms: []\n    };\n  }\n\n  componentDidMount() {\n    firebaseRooms.once('value').then(snapshot => {\n      const rooms = firebaseLooper(snapshot);\n      let promises = [];\n\n      for (let key in rooms) {\n        promises.push(new Promise((resolve, reject) => {\n          firebase.storage().ref('/rooms').child(rooms[key].image).getDownloadURL().then(url => {\n            rooms[key].url = url;\n            resolve();\n          }).catch(e => {\n            console.log('error occured', e);\n            reject(e);\n          });\n        }));\n      }\n\n      Promise.all(promises).then(() => {\n        this.setState({\n          isLoading: false,\n          rooms: reverseArray(rooms)\n        });\n      });\n    }).catch(error => {\n      console.log('firebase rooms error', error);\n    });\n  }\n\n  addRooms(room, i) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mb-4 box-shadow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"card-img-top\",\n      src: room.url,\n      alt: room.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 25\n      }\n    }, room.description), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"btn-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `accomodation/${room.id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-sm btn-outline-secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 37\n      }\n    }, \"View\")), /*#__PURE__*/React.createElement(Link, {\n      to: `admin_rooms/add_rooms/${room.id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-sm btn-outline-secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 37\n      }\n    }, \"Edit\"))), /*#__PURE__*/React.createElement(\"small\", {\n      className: \"text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 29\n      }\n    }, room.name)))));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(AdminLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"album py-5 bg-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }\n    }, this.state.rooms ? this.state.rooms.map((room, i) =>\n    /* firebaseDB.ref(`rooms/${room.id}`).once('value').then((snapshot) => {\r\n        const roomData = snapshot.val();\r\n            firebase.storage().ref('/rooms')\r\n            .child(roomData.image).getDownloadURL()\r\n            .then( url => {\r\n                this.addRooms(room, i, url)\r\n        })\r\n    })\r\n     */\n    this.addRooms(room, i)) : null))));\n  }\n\n}\n\nexport default AdminRooms;","map":{"version":3,"sources":["D:/2077/ForMerging-master/ForMerging/src/components/admin/rooms/index.js"],"names":["React","Component","AdminLayout","Link","firebase","firebaseRooms","firebaseLooper","reverseArray","AdminRooms","state","isLoading","rooms","componentDidMount","once","then","snapshot","promises","key","push","Promise","resolve","reject","storage","ref","child","image","getDownloadURL","url","catch","e","console","log","all","setState","error","addRooms","room","i","name","description","id","render","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport AdminLayout from '../../../HOC/AdminLayout';\r\nimport { Link } from 'react-router-dom';\r\nimport { firebase, firebaseRooms } from '../../../firebase';\r\nimport {firebaseLooper, reverseArray} from '../../ui/misc';\r\n\r\n\r\nclass AdminRooms extends Component {\r\n\r\n    state= {\r\n        isLoading: true,\r\n        rooms: []\r\n    }\r\n\r\n    componentDidMount(){\r\n        firebaseRooms.once('value').then((snapshot) => {\r\n            const rooms = firebaseLooper(snapshot);\r\n            let promises = [];\r\n            for(let key in rooms){\r\n                promises.push(\r\n                    new Promise((resolve, reject) => {\r\n                        firebase.storage().ref('/rooms')\r\n                        .child(rooms[key].image).getDownloadURL()\r\n                        .then( url => {\r\n                            rooms[key].url = url\r\n                            resolve();\r\n                        }).catch( e => {\r\n                            console.log('error occured', e)\r\n                            reject(e);\r\n                        })\r\n                    }) \r\n                )\r\n            }\r\n            Promise.all(promises).then(() => {\r\n                this.setState({\r\n                    isLoading: false,\r\n                    rooms: reverseArray(rooms)\r\n                })\r\n            })\r\n        }).catch((error) => {\r\n            console.log('firebase rooms error', error);\r\n        })\r\n    }\r\n\r\n    addRooms(room, i){        \r\n        return(\r\n            <div className=\"col-md-4\" key={i}>\r\n                <div className=\"card mb-4 box-shadow\">\r\n                    <img className=\"card-img-top\" src={room.url} alt={room.name}/>\r\n                    <div className=\"card-body\">\r\n                        <p className=\"card-text\">{room.description}</p>\r\n                        <div className=\"d-flex justify-content-between align-items-center\">\r\n                            <div className=\"btn-group\">\r\n                                <Link to={`accomodation/${room.id}`}>\r\n                                    <button type=\"button\" className=\"btn btn-sm btn-outline-secondary\">View</button>\r\n                                </Link>\r\n                                <Link to={`admin_rooms/add_rooms/${room.id}`}>\r\n                                    <button type=\"button\" className=\"btn btn-sm btn-outline-secondary\">Edit</button>\r\n                                </Link>\r\n                                \r\n                            </div>\r\n                            <small className=\"text-muted\">{room.name}</small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        \r\n        return (\r\n            <AdminLayout>\r\n                <div className=\"album py-5 bg-light\">\r\n                    <div className=\"container\">\r\n                        <div className=\"row\">\r\n                            \r\n                            {this.state.rooms ?\r\n                                this.state.rooms.map((room, i)=>(\r\n                                    /* firebaseDB.ref(`rooms/${room.id}`).once('value').then((snapshot) => {\r\n                                        const roomData = snapshot.val();\r\n                                            firebase.storage().ref('/rooms')\r\n                                            .child(roomData.image).getDownloadURL()\r\n                                            .then( url => {\r\n                                                this.addRooms(room, i, url)\r\n                                        })\r\n                                    })\r\n                                     */\r\n                                    this.addRooms(room, i)\r\n                                ))\r\n                                :null\r\n                            }\r\n                        </div>\r\n                    </div>    \r\n                </div>\r\n            </AdminLayout>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AdminRooms;"]},"metadata":{},"sourceType":"module"}